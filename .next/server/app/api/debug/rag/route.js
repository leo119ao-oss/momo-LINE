(()=>{var e={};e.id=517,e.ids=[517],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},2623:e=>{"use strict";e.exports=require("worker_threads")},1568:e=>{"use strict";e.exports=require("zlib")},7561:e=>{"use strict";e.exports=require("node:fs")},4492:e=>{"use strict";e.exports=require("node:stream")},2477:e=>{"use strict";e.exports=require("node:stream/web")},3541:(e,r,s)=>{"use strict";s.r(r),s.d(r,{originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>h,routeModule:()=>l,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var t={};s.r(t),s.d(t,{GET:()=>m,runtime:()=>p});var a=s(9303),i=s(8716),u=s(670),n=s(7070),c=s(4214),o=s(8316),d=s(4722);let p="nodejs";async function m(e){let r=new URL(e.url).searchParams.get("q")||"子育て イライラ 解消 コツ",s=new c.default({apiKey:process.env.OPENAI_API_KEY}),t=await s.embeddings.create({model:"text-embedding-3-small",input:r}),{data:a,error:i}=await o.supabaseAdmin.rpc("match_documents_arr",{query_embedding:t.data[0].embedding,match_count:8}),u="";if(a&&a.length>0)try{let e=a.slice(0,3);u=await (0,d.U0)(r,e)}catch(e){u=`Error generating reference block: ${e}`}return n.NextResponse.json({q:r,error:i,hits:a?.map(e=>({id:e.id,sim:e.similarity,url:e.source_url,preview:e.content.slice(0,80)})),referenceBlock:u})}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/debug/rag/route",pathname:"/api/debug/rag",filename:"route",bundlePath:"app/api/debug/rag/route"},resolvedPagePath:"C:\\Users\\Owner\\Desktop\\momo-LINE\\src\\app\\api\\debug\\rag\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:h,staticGenerationAsyncStorage:g,serverHooks:x}=l,y="/api/debug/rag/route";function f(){return(0,u.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}},3974:e=>{function r(e,r,s,t){return Math.round(e/s)+" "+t+(r>=1.5*s?"s":"")}e.exports=function(e,s){s=s||{};var t,a,i=typeof e;if("string"===i&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var s=parseFloat(r[1]);switch((r[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return 864e5*s;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*s;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*s;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(e);if("number"===i&&isFinite(e))return s.long?(t=Math.abs(e))>=864e5?r(e,t,864e5,"day"):t>=36e5?r(e,t,36e5,"hour"):t>=6e4?r(e,t,6e4,"minute"):t>=1e3?r(e,t,1e3,"second"):e+" ms":(a=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":a>=36e5?Math.round(e/36e5)+"h":a>=6e4?Math.round(e/6e4)+"m":a>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[276,498,972,214,722],()=>s(3541));module.exports=t})();