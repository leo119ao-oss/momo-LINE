(()=>{var e={};e.id=832,e.ids=[832],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1306:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>c,originalPathname:()=>u,pages:()=>p,routeModule:()=>x,tree:()=>l}),r(1667),r(27),r(5866);var i=r(3191),n=r(8716),s=r(7922),o=r.n(s),a=r(5231),d={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);r.d(t,d);let l=["",{children:["diary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1667)),"C:\\Users\\Owner\\Desktop\\momo-LINE\\app\\diary\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,27)),"C:\\Users\\Owner\\Desktop\\momo-LINE\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],p=["C:\\Users\\Owner\\Desktop\\momo-LINE\\app\\diary\\page.tsx"],u="/diary/page",c={require:r,loadChunk:()=>Promise.resolve()},x=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/diary/page",pathname:"/diary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7390:(e,t,r)=>{Promise.resolve().then(r.bind(r,792))},4607:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5321:()=>{},792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(326),n=r(7577);function s(){let[e,t]=(0,n.useState)(),[r,s]=(0,n.useState)(null),[a,m]=(0,n.useState)(!1),[g,h]=(0,n.useState)(null),[f,b]=(0,n.useState)(""),[y,j]=(0,n.useState)([]),[v,P]=(0,n.useState)(""),[S,_]=(0,n.useState)(""),[w,k]=(0,n.useState)("");if(!e)return i.jsx(o,{children:i.jsx("p",{children:"読み込み中…"})});async function F(){if(!r||!e)return;let t=new FormData;t.append("contact",e),t.append("file",r),m(!0);let i=await fetch("/api/diary/upload",{method:"POST",body:t});if(m(!1),!i.ok)return alert("アップロード失敗");let n=await i.json();h(n.entry_id),b(n.public_url),j(n.suggested),P(n.suggested[0]||"")}async function E(){let e=await fetch("/api/diary/finalize",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({entry_id:g,title:v,extra_note:S})});if(!e.ok)return alert("作成失敗");k((await e.json()).url)}return(0,i.jsxs)(o,{children:[i.jsx("h1",{style:d,children:"家族カード（絵日記）"}),!g&&(0,i.jsxs)("div",{style:l,children:[i.jsx("input",{type:"file",accept:"image/*",onChange:e=>s(e.target.files?.[0]||null)}),i.jsx("button",{onClick:F,disabled:!r||a,style:p,children:a?"アップロード中…":"アップロード"})]}),g&&!w&&(0,i.jsxs)("div",{style:l,children:[f&&i.jsx("img",{src:f,alt:"",style:{width:"100%",borderRadius:12,marginBottom:10}}),i.jsx("div",{style:{fontSize:13,color:"#444",marginBottom:6},children:"キャプション候補（自由入力もOK）"}),i.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:8},children:y.map(e=>i.jsx("button",{onClick:()=>P(e),style:{padding:"6px 10px",borderRadius:999,border:"1px solid #ddd",background:v===e?"#FFEEF2":"#fff"},children:e},e))}),i.jsx("input",{value:v,onChange:e=>P(e.target.value),placeholder:"キャプションを入力",style:c}),(0,i.jsxs)("div",{style:{marginTop:10},children:[i.jsx("div",{style:{fontSize:13,color:"#444",marginBottom:6},children:"一言メモ（任意）"}),i.jsx("textarea",{value:S,onChange:e=>_(e.target.value.slice(0,80)),placeholder:"例：寝かしつけ、ありがとう！",style:u}),(0,i.jsxs)("div",{style:{textAlign:"right",fontSize:12,color:"#999"},children:[S.length,"/80"]})]}),i.jsx("button",{onClick:E,disabled:!v,style:p,children:"カードを作る"})]}),w&&(0,i.jsxs)("div",{style:l,children:[i.jsx("p",{children:"カードができました。"}),i.jsx("a",{href:w,style:x,children:"カードを開く（共有用URL）"})]})]})}function o({children:e}){return(0,i.jsxs)("main",{style:{maxWidth:560,margin:"0 auto",padding:"20px 16px"},children:[i.jsx("div",{style:a,children:"momo 研究モード"}),e]})}r(5023);let a={background:"#FFF0F4",color:"#FF6F91",padding:"8px 12px",borderRadius:10,fontSize:12,textAlign:"center",marginBottom:12},d={fontSize:22,fontWeight:700,margin:"4px 0 8px"},l={background:"#fff",border:"1px solid #eee",borderRadius:12,padding:16,marginBottom:12},p={marginTop:8,width:"100%",background:"#FF8FA3",color:"#fff",border:"none",padding:"12px",borderRadius:10,fontWeight:700,fontSize:16},u={width:"100%",height:80,border:"1px solid #ddd",borderRadius:8,padding:"10px 12px",fontSize:16},c={width:"100%",border:"1px solid #ddd",borderRadius:8,padding:"10px 12px",fontSize:16},x={display:"inline-block",padding:"10px 12px",borderRadius:10,border:"1px solid #eee",background:"#F7F7F7",textDecoration:"none",color:"#333"}},5023:(e,t,r)=>{"use strict";r(563)},1667:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});let i=(0,r(8570).createProxy)(String.raw`C:\Users\Owner\Desktop\momo-LINE\app\diary\page.tsx#default`)},27:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>a});var i=r(9510),n=r(7366),s=r.n(n);function o(){let e=process.env.NEXT_PUBLIC_RESEARCH_BANNER??"研究モード";return i.jsx("div",{className:"w-full text-center text-xs py-1 bg-amber-50 text-amber-700 border-b",children:e})}r(7272);let a={title:"Momo LINE Bot",description:"LINE Bot application with OpenAI and Supabase integration"};function d({children:e}){return i.jsx("html",{lang:"ja",children:(0,i.jsxs)("body",{className:s().className,children:[i.jsx(o,{}),e]})})}},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[948,82,563],()=>r(1306));module.exports=i})();