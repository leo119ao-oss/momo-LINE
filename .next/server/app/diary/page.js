(()=>{var e={};e.id=832,e.ids=[832],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9813:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>x,originalPathname:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>d}),r(6513),r(4042),r(5866);var o=r(3191),n=r(8716),i=r(7922),a=r.n(i),l=r(5231),s={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>l[e]);r.d(t,s);let d=["",{children:["diary",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6513)),"C:\\Users\\Owner\\Desktop\\momo-LINE\\src\\app\\diary\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4042)),"C:\\Users\\Owner\\Desktop\\momo-LINE\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],p=["C:\\Users\\Owner\\Desktop\\momo-LINE\\src\\app\\diary\\page.tsx"],c="/diary/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new o.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/diary/page",pathname:"/diary",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4607:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5909:()=>{},9740:(e,t,r)=>{Promise.resolve().then(r.bind(r,9515))},9515:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var o=r(326),n=r(7577),i=r(6226);r(3543);var a=r(7256),l=r(3138),s=r(7300),d=r(7878),p=r(8971),c=r(4734);function x(){let[e,t]=(0,n.useState)(),[r,x]=(0,n.useState)(null),[u,g]=(0,n.useState)(!1),[h,m]=(0,n.useState)(null),[F,b]=(0,n.useState)(""),[f,y]=(0,n.useState)([]),[j,C]=(0,n.useState)(""),[v,E]=(0,n.useState)(""),[S,k]=(0,n.useState)("");if(!e)return o.jsx(a.Z,{title:"家族カード（絵日記）",subtitle:"読み込み中...",isLoading:!0});async function B(){if(!r||!e)return;let t=new FormData;t.append("contact",e),t.append("file",r),g(!0);let o=await fetch("/api/diary/upload",{method:"POST",body:t});if(g(!1),!o.ok)return alert("アップロード失敗");let n=await o.json();m(n.entry_id),b(n.public_url),y(n.suggested),C(n.suggested[0]||"")}async function w(){let e=await fetch("/api/diary/finalize",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({entry_id:h,title:j,extra_note:v})});if(!e.ok)return alert("作成失敗");k((await e.json()).url)}return(0,o.jsxs)(a.Z,{title:"家族カード（絵日記）",subtitle:"写真をアップロードして家族に送るカードを作成",children:[!h&&(0,o.jsxs)(l.Z,{children:[o.jsx(d.Z,{label:"写真を選択",description:"画像ファイルを選択してください",children:o.jsx("input",{type:"file",accept:"image/*",onChange:e=>x(e.target.files?.[0]||null),style:{width:"100%",padding:"12px",border:"2px dashed #E5E7EB",borderRadius:"12px",backgroundColor:"#FAFAFA",fontSize:"16px"}})}),o.jsx(s.Z,{onClick:B,disabled:!r||u,variant:"primary",size:"large",fullWidth:!0,children:u?"アップロード中…":"アップロード"})]}),h&&!S&&(0,o.jsxs)(l.Z,{children:[F&&o.jsx(i.default,{src:F,alt:"プレビュー",width:400,height:300,style:{width:"100%",height:"auto",borderRadius:"16px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"}}),(0,o.jsxs)(d.Z,{label:"キャプション",description:"候補から選択するか、自由に入力してください",children:[o.jsx(c.Z,{options:f,value:j,onChange:C,variant:"compact"}),o.jsx(p.Z,{value:j,onChange:C,placeholder:"キャプションを入力",style:{marginTop:"8px"}})]}),o.jsx(d.Z,{label:"一言メモ",description:"任意で追加できます（80字まで）",children:o.jsx(p.Z,{value:v,onChange:e=>E(e.slice(0,80)),placeholder:"例：寝かしつけ、ありがとう！",maxLength:80,multiline:!0,rows:3})}),o.jsx(s.Z,{onClick:w,disabled:!j,variant:"primary",size:"large",fullWidth:!0,children:"カードを作る"})]}),S&&o.jsx(l.Z,{variant:"accent",children:(0,o.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83C\uDF89"}),o.jsx("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px"},children:"カードができました！"}),o.jsx("p",{style:{fontSize:"14px",color:"#666",marginBottom:"16px"},children:"家族と共有できるURLが生成されました"}),o.jsx(s.Z,{onClick:()=>window.open(S,"_blank"),variant:"primary",size:"large",fullWidth:!0,children:"カードを開く"})]})})]})}},7300:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(326);function n({children:e,onClick:t,variant:r="primary",size:n="medium",disabled:a=!1,fullWidth:l=!1,type:s="button",style:d}){let p={...i.button,...i.variant[r],...i.size[n],...l&&i.fullWidth,...a&&i.disabled,...d};return o.jsx("button",{type:s,style:p,onClick:t,disabled:a,children:e})}let i={button:{border:"none",borderRadius:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},variant:{primary:{backgroundColor:"#FF6B9D",color:"#FFFFFF",boxShadow:"0 2px 8px rgba(255, 107, 157, 0.3)"},secondary:{backgroundColor:"#F3F4F6",color:"#374151",border:"1px solid #D1D5DB"},outline:{backgroundColor:"transparent",color:"#FF6B9D",border:"2px solid #FF6B9D"},ghost:{backgroundColor:"transparent",color:"#6B7280",border:"none"}},size:{small:{padding:"8px 12px",fontSize:"14px"},medium:{padding:"12px 16px",fontSize:"16px"},large:{padding:"16px 20px",fontSize:"16px"}},fullWidth:{width:"100%"},disabled:{opacity:.5,cursor:"not-allowed",backgroundColor:"#F3F4F6",color:"#9CA3AF",boxShadow:"none"}}},3138:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(326);function n({children:e,padding:t="medium",margin:r="small",variant:n="default"}){let a={...i.card,...i.padding[t],...i.margin[r],...i.variant[n]};return o.jsx("div",{style:a,children:e})}let i={card:{backgroundColor:"#FFFFFF",borderRadius:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",border:"1px solid #E5E5E5"},padding:{small:{padding:"12px"},medium:{padding:"16px"},large:{padding:"20px"}},margin:{small:{marginBottom:"12px"},medium:{marginBottom:"16px"},large:{marginBottom:"20px"}},variant:{default:{},accent:{backgroundColor:"#FFF0F4",borderColor:"#FFB3C6"},warning:{backgroundColor:"#FFF5F5",borderColor:"#FECACA"}}}},4734:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(326);function n({options:e,value:t,onChange:r,variant:n="default"}){let a="compact"===n?i.compactChip:i.chip;return o.jsx("div",{style:i.container,children:e.map(e=>o.jsx("button",{onClick:()=>r(e),style:{...a,...t===e?i.selected:i.unselected},children:e},e))})}let i={container:{display:"flex",gap:"8px",flexWrap:"wrap"},chip:{padding:"10px 16px",borderRadius:"20px",border:"2px solid #E5E7EB",backgroundColor:"#FFFFFF",color:"#374151",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",minWidth:"60px",textAlign:"center"},compactChip:{padding:"6px 12px",borderRadius:"16px",border:"1px solid #E5E7EB",backgroundColor:"#FFFFFF",color:"#374151",fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",minWidth:"50px",textAlign:"center"},selected:{backgroundColor:"#FFF0F4",borderColor:"#FF6B9D",color:"#FF6B9D",fontWeight:"600"},unselected:{backgroundColor:"#FFFFFF",borderColor:"#E5E7EB",color:"#374151"}}},7878:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(326);function n({label:e,children:t,description:r,required:n=!1}){return(0,o.jsxs)("div",{style:i.field,children:[(0,o.jsxs)("label",{style:i.label,children:[e,n&&o.jsx("span",{style:i.required,children:"*"})]}),r&&o.jsx("p",{style:i.description,children:r}),o.jsx("div",{style:i.input,children:t})]})}let i={field:{marginBottom:"16px"},label:{display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"6px"},required:{color:"#EF4444",marginLeft:"2px"},description:{fontSize:"12px",color:"#6B7280",marginBottom:"8px",margin:"0 0 8px 0"},input:{}}},8971:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(326);function n({value:e,onChange:t,placeholder:r,maxLength:n,multiline:a=!1,rows:l=3,type:s="text",style:d}){let p={...i.input,...a&&{...i.textarea,height:`${24*l+16}px`},...d};return a?(0,o.jsxs)("div",{style:{...i.container,...d},children:[o.jsx("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:r,maxLength:n,rows:l,style:p}),n&&(0,o.jsxs)("div",{style:i.counter,children:[e.length,"/",n]})]}):(0,o.jsxs)("div",{style:{...i.container,...d},children:[o.jsx("input",{type:s,value:e,onChange:e=>t(e.target.value),placeholder:r,maxLength:n,style:p}),n&&(0,o.jsxs)("div",{style:i.counter,children:[e.length,"/",n]})]})}let i={container:{position:"relative"},input:{width:"100%",padding:"12px 16px",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"16px",color:"#374151",backgroundColor:"#FFFFFF",outline:"none",transition:"border-color 0.2s ease"},textarea:{width:"100%",padding:"12px 16px",border:"2px solid #E5E7EB",borderRadius:"12px",fontSize:"16px",color:"#374151",backgroundColor:"#FFFFFF",outline:"none",transition:"border-color 0.2s ease",resize:"vertical",fontFamily:"inherit"},counter:{position:"absolute",bottom:"8px",right:"12px",fontSize:"12px",color:"#9CA3AF",backgroundColor:"#FFFFFF",padding:"2px 6px",borderRadius:"4px"}}},7256:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var o=r(326);function n({children:e,title:t,subtitle:r,isLoading:n=!1,error:a}){return(0,o.jsxs)("div",{style:i.container,children:[(0,o.jsxs)("header",{style:i.header,children:[(0,o.jsxs)("div",{style:i.logo,children:[o.jsx("span",{style:i.logoIcon,children:"\uD83C\uDF38"}),o.jsx("span",{style:i.logoText,children:"Momo"})]}),o.jsx("h1",{style:i.title,children:t}),r&&o.jsx("p",{style:i.subtitle,children:r})]}),(0,o.jsxs)("main",{style:i.main,children:[n&&(0,o.jsxs)("div",{style:i.loadingContainer,children:[o.jsx("div",{style:i.loadingSpinner}),o.jsx("p",{style:i.loadingText,children:"読み込み中..."})]}),a&&(0,o.jsxs)("div",{style:i.errorContainer,children:[o.jsx("div",{style:i.errorIcon,children:"⚠️"}),o.jsx("p",{style:i.errorText,children:a})]}),!n&&!a&&e]}),o.jsx("footer",{style:i.footer,children:o.jsx("p",{style:i.footerText,children:"お疲れさまです \uD83C\uDF38"})})]})}let i={container:{minHeight:"100vh",backgroundColor:"#FAFAFA",display:"flex",flexDirection:"column"},header:{backgroundColor:"#FFFFFF",padding:"16px 20px",borderBottom:"1px solid #E5E5E5",textAlign:"center"},logo:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},logoIcon:{fontSize:"24px"},logoText:{fontSize:"18px",fontWeight:"bold",color:"#FF6B9D"},title:{fontSize:"20px",fontWeight:"600",color:"#333333",margin:"0 0 4px 0"},subtitle:{fontSize:"14px",color:"#666666",margin:"0"},main:{flex:1,padding:"20px",maxWidth:"480px",margin:"0 auto",width:"100%"},loadingContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px"},loadingSpinner:{width:"32px",height:"32px",border:"3px solid #E5E5E5",borderTop:"3px solid #FF6B9D",borderRadius:"50%",animation:"spin 1s linear infinite"},loadingText:{marginTop:"12px",fontSize:"14px",color:"#666666"},errorContainer:{backgroundColor:"#FFF5F5",border:"1px solid #FECACA",borderRadius:"12px",padding:"16px",textAlign:"center"},errorIcon:{fontSize:"24px",marginBottom:"8px"},errorText:{fontSize:"14px",color:"#DC2626",margin:"0"},footer:{backgroundColor:"#FFFFFF",padding:"16px 20px",borderTop:"1px solid #E5E5E5",textAlign:"center"},footerText:{fontSize:"12px",color:"#999999",margin:"0"}}},3543:(e,t,r)=>{"use strict";r(563)},6513:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(8570).createProxy)(String.raw`C:\Users\Owner\Desktop\momo-LINE\src\app\diary\page.tsx#default`)},4042:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>l});var o=r(9510),n=r(5384),i=r.n(n);function a(){let e=process.env.NEXT_PUBLIC_RESEARCH_BANNER??"研究モード";return o.jsx("div",{className:"w-full text-center text-xs py-1 bg-amber-50 text-amber-700 border-b",children:e})}r(5023);let l={title:"Momo LINE Bot",description:"LINE Bot application with OpenAI and Supabase integration"};function s({children:e}){return o.jsx("html",{lang:"ja",children:(0,o.jsxs)("body",{className:i().className,children:[o.jsx(a,{}),e]})})}},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[948,349,563,226],()=>r(9813));module.exports=o})();