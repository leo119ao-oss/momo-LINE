(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[620],{4410:function(e,n,t){Promise.resolve().then(t.bind(t,5614))},5614:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return a},dynamic:function(){return c}});var i=t(7437),r=t(2265),o=t(4234),s=t(257);let c="force-dynamic";function a(){let[e,n]=(0,r.useState)(),[t,c]=(0,r.useState)(!1),[a,g]=(0,r.useState)(!1),[y,b]=(0,r.useState)("");async function j(n){n.preventDefault(),e&&((await fetch("/api/consent",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({display_name:y||"momo",contact:e,cohort:"community"})})).ok?location.href="/daily":alert("送信に失敗しました。しばらくしてからお試しください。"))}return((0,r.useEffect)(()=>{(async()=>{await (0,o.M)(s.env.NEXT_PUBLIC_LIFF_CONSENT_ID),n(await (0,o.C)())})()},[]),e)?(0,i.jsxs)(d,{children:[(0,i.jsx)("h1",{style:l,children:"研究への参加について"}),(0,i.jsxs)("ol",{style:{margin:"12px 0 18px",paddingLeft:20,lineHeight:1.6},children:[(0,i.jsxs)("li",{children:["毎日 ",(0,i.jsx)("b",{children:"60秒"})," の記録、週に一度 ",(0,i.jsx)("b",{children:"1〜2分"})," の振り返りをお願いします。"]}),(0,i.jsxs)("li",{children:["これは ",(0,i.jsx)("b",{children:"医療行為ではありません"}),"。つらい時は相談先（/help）をご覧ください。"]}),(0,i.jsx)("li",{children:"データは研究とサービス改善のために活用します。いつでも中止できます。"})]}),(0,i.jsxs)("form",{onSubmit:j,style:h,children:[(0,i.jsx)("label",{style:u,children:"ニックネーム"}),(0,i.jsx)("input",{value:y,onChange:e=>b(e.target.value),placeholder:"例：momo",maxLength:20,style:p}),(0,i.jsxs)("div",{style:{marginTop:12},children:[(0,i.jsxs)("label",{style:f,children:[(0,i.jsx)("input",{type:"checkbox",checked:t,onChange:e=>c(e.target.checked)}),(0,i.jsx)("span",{children:" 研究への参加に同意します"})]}),(0,i.jsxs)("label",{style:f,children:[(0,i.jsx)("input",{type:"checkbox",checked:a,onChange:e=>g(e.target.checked)}),(0,i.jsx)("span",{children:" 医療行為ではないことを理解しました"})]})]}),(0,i.jsx)("button",{disabled:!(t&&a),style:{...x,opacity:t&&a?1:.5},children:"同意してはじめる（60秒でOK）"})]}),(0,i.jsx)("p",{style:{fontSize:12,color:"#666"},children:"※困ったら「ヘルプ」メニューからご連絡ください。"})]}):(0,i.jsx)(d,{children:(0,i.jsx)("p",{children:"LINE連携中…"})})}function d(e){let{children:n}=e;return(0,i.jsx)("main",{style:{maxWidth:560,margin:"0 auto",padding:"20px 16px"},children:n})}let l={fontSize:22,fontWeight:700,margin:"4px 0 8px"},h={background:"#fff",border:"1px solid #eee",borderRadius:12,padding:16},u={display:"block",fontSize:13,color:"#444",marginBottom:6},p={width:"100%",border:"1px solid #ddd",borderRadius:8,padding:"10px 12px",fontSize:16},f={display:"block",margin:"10px 0",fontSize:14},x={marginTop:16,width:"100%",background:"#FF8FA3",color:"#fff",border:"none",padding:"12px",borderRadius:10,fontWeight:700,fontSize:16}},4234:function(e,n,t){"use strict";t.d(n,{C:function(){return o},M:function(){return r}});var i=t(1571);async function r(e){i.Z.isLoggedIn()||await i.Z.init({liffId:e})}async function o(){return(await i.Z.getProfile()).userId}}},function(e){e.O(0,[370,971,117,744],function(){return e(e.s=4410)}),_N_E=e.O()}]);