(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{1606:function(e,t,n){Promise.resolve().then(n.bind(n,2899))},2899:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var a=n(7437),l=n(2265),r=n(4234),s=n(257);function o(){let[e,t]=(0,l.useState)(),[n,o]=(0,l.useState)(5),[i,c]=(0,l.useState)(5),[u,d]=(0,l.useState)(5),[m,h]=(0,l.useState)(""),[g,x]=(0,l.useState)(""),[b,p]=(0,l.useState)(!1);async function f(t){p(!0);try{await fetch("/api/daily",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({...t,user_id:e})}),alert("送信しました（60秒）")}catch(e){alert("エラーが発生しました。")}finally{p(!1)}}(0,l.useEffect)(()=>{(async()=>{try{let e=s.env.NEXT_PUBLIC_LIFF_DAILY_ID||"2008112810-GLXVgj3z";console.log("[DAILY] LIFF ID: ".concat(e)),await (0,r.M)(e),t(await (0,r.C)())}catch(e){console.error("[DAILY] LIFF initialization error:",e)}})()},[]);let v=async e=>{e.preventDefault(),m&&await f({mood:n,load:i,efficacy:u,choice:m,memo:g.slice(0,80)})};return e?(0,a.jsxs)("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-center",children:"今日のひとこと"}),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["気分: ",n,"/10"]}),(0,a.jsx)("input",{type:"range",min:"0",max:"10",value:n,onChange:e=>o(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["負担: ",i,"/10"]}),(0,a.jsx)("input",{type:"range",min:"0",max:"10",value:i,onChange:e=>c(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["自信: ",u,"/10"]}),(0,a.jsx)("input",{type:"range",min:"0",max:"10",value:u,onChange:e=>d(Number(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"今日の選択"}),(0,a.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"",children:"選択してください"}),(0,a.jsx)("option",{value:"子育てに集中",children:"子育てに集中"}),(0,a.jsx)("option",{value:"自分の時間を作った",children:"自分の時間を作った"}),(0,a.jsx)("option",{value:"家族と過ごした",children:"家族と過ごした"}),(0,a.jsx)("option",{value:"新しいことに挑戦",children:"新しいことに挑戦"}),(0,a.jsx)("option",{value:"休息を取った",children:"休息を取った"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["一言メモ (",g.length,"/80)"]}),(0,a.jsx)("textarea",{value:g,onChange:e=>x(e.target.value),maxLength:80,placeholder:"今日の気持ちや出来事を一言で...",className:"w-full p-2 border border-gray-300 rounded-md h-20 resize-none"})]}),(0,a.jsx)("button",{type:"submit",disabled:b||!m,className:"w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:b?"送信中...":"送信"})]})]}):(0,a.jsx)("div",{className:"p-4 text-sm",children:"LINE連携中…"})}},4234:function(e,t,n){"use strict";n.d(t,{C:function(){return r},M:function(){return l}});var a=n(1571);async function l(e){try{console.log("[LIFF] Initializing with ID: ".concat(e)),a.Z.isLoggedIn()?console.log("[LIFF] Already logged in with ID: ".concat(e)):(await a.Z.init({liffId:e}),console.log("[LIFF] Successfully initialized with ID: ".concat(e)))}catch(t){throw console.error("[LIFF] Error initializing with ID ".concat(e,":"),t),t}}async function r(){try{let e=await a.Z.getProfile();return console.log("[LIFF] Got user profile: ".concat(e.userId)),e.userId}catch(e){throw console.error("[LIFF] Error getting user profile:",e),e}}}},function(e){e.O(0,[370,971,117,744],function(){return e(e.s=1606)}),_N_E=e.O()}]);